(function(){"use strict";var e={680:function(e,i,t){var r=t(963),n=t(252);const s={class:"App"};function a(e,i,t,r,a,o){const l=(0,n.up)("Dropzone"),d=(0,n.up)("Main");return(0,n.wg)(),(0,n.iD)(n.HY,null,[((0,n.wg)(),(0,n.iD)(n.HY,null,(0,n.Ko)(2,(e=>(0,n._)("div",s,[(0,n.Wm)(l,{state:a.state,caption:"zone "+e},null,8,["state","caption"])]))),64)),(0,n.Wm)(d)],64)}const o={class:"main"};function l(e,i,t,r,s,a){return(0,n.wg)(),(0,n.iD)("div",o," main component ")}var d={name:"Main",props:["state"],data(){return{testData:"it works!"}}},p=t(744);const f=(0,p.Z)(d,[["render",l],["__scopeId","data-v-494a82c8"]]);var h=f,g=t(577);const c=e=>((0,n.dD)("data-v-25484d73"),e=e(),(0,n.Cn)(),e),u=["innerHTML"],v={key:0},m=c((()=>(0,n._)("p",null,[(0,n.Uk)("Drag one or more files to this "),(0,n._)("i",null,"drop zone"),(0,n.Uk)(".")],-1))),w=[m],D={key:1},O={key:0},U={key:1},y=["innerHTML"];function L(e,i,t,r,s,a){return(0,n.wg)(),(0,n.iD)("div",{class:(0,g.C_)(["dropzone",{dragOver:s.draggingOver,fileUploading:s.showProgress,finished:s.finished}]),ref:"drop_zone",onDrop:i[0]||(i[0]=(...e)=>a.dropHandler&&a.dropHandler(...e)),onDragover:i[1]||(i[1]=(...e)=>a.dragOverHandler&&a.dragOverHandler(...e)),onDragleave:i[2]||(i[2]=(...e)=>a.dragLeaveHandler&&a.dragLeaveHandler(...e)),onMouseup:i[3]||(i[3]=(...i)=>e.mouseupHandler&&e.mouseupHandler(...i))},[(0,n._)("div",{class:"caption",innerHTML:t.caption},null,8,u),s.showProgress||s.finished?((0,n.wg)(),(0,n.iD)("div",D,[s.finished?((0,n.wg)(),(0,n.iD)("div",O," finished uploading "+(0,g.zw)(this.count)+" files ",1)):((0,n.wg)(),(0,n.iD)("div",U,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(s.fileList,((e,i)=>((0,n.wg)(),(0,n.iD)("div",{key:i},[(0,n._)("span",{class:"fileName",innerHTML:a.fileNameFormatted(e.name)},null,8,y),((0,n.wg)(),(0,n.iD)("div",{class:"progressBar",key:"outer_"+i},[((0,n.wg)(),(0,n.iD)("div",{style:(0,g.j5)(a.setWidth(i)),class:"innerProgress",key:"inner_"+i},null,4))]))])))),128))]))])):((0,n.wg)(),(0,n.iD)("div",v,w))],34)}var P={name:"Dropzone",props:["state","caption"],data(){return{testData:"it works!",draggingOver:!1,showProgress:!1,fileList:[],count:0,finished:!1,showUploadProgress:!1,filesUploading:[]}},methods:{setWidth(e){return"width: calc("+this.filesUploading[e].perc+"%)"},fileNameFormatted(e){return e.length<=30?e:e.substring(0,20)+"..."+e.substring(e.length-6)},dropHandler(e){let i=!1;this.count=0,e.preventDefault(),this.filesUploading=[],e.dataTransfer.items?(this.fileList=[],this.count=[...e.dataTransfer.items].length,this.filesUploading=Array(this.count).fill().map((e=>({}))),[...e.dataTransfer.items].forEach(((e,t)=>{if("file"===e.kind){const r=e.getAsFile();console.log(`â€¦ file[${t}].name = ${r.name}`),this.showProgress=!0,this.draggingOver=!1,this.fileList=[...this.fileList,r];let n=this.fileList;Array.from(n).forEach(((e,i)=>{e.completed=!1,this.filesUploading[i].perc=0,this.filesUploading[i].fileName=e.name})),Array.from(n).forEach(((e,t)=>{if(!i)if(e.size<1e8){let i=new FormData;i.append("name",e.name),i.append("userID",this.state.loggedinUserID),i.append("description",""),i.append("file",e);let r=new XMLHttpRequest;r.open("POST",this.state.baseURL+"/upload.php"),r.upload.addEventListener("progress",(i=>{let r=i.loaded/i.total*100;this.filesUploading[t].fileName=e.name,this.filesUploading[t].perc=r})),r.addEventListener("load",(i=>{e.completed=!0;let t=!0;Array.from(n).forEach((e=>{e.completed||(t=!1)})),t&&(this.finished=!0,this.draggingOver=!1,this.showProgress=!1)})),r.send(i)}else this.showUploadProgress=!1,this.finished=!1,this.draggingOver=!1,i=!0,alert("a file was rejected due to incorrect type or filesize (max filesize = 100MB)"),this.$nextTick((()=>{this.showUploadProgress=!1,this.finished=!1,this.draggingOver=!1}))}))}}))):(this.fileList=[],this.count=[...e.dataTransfer.files].length,this.filesUploading=Array(this.count).fill().map((e=>({}))),[...e.dataTransfer.files].forEach(((e,t)=>{if(i)return;this.showProgress=!0,this.draggingOver=!1,this.fileList=[...this.fileList,e];let r=this.fileList;Array.from(r).forEach(((e,i)=>{e.completed=!1,this.filesUploading[i].perc=0,this.filesUploading[i].fileName=e.name})),Array.from(r).forEach(((e,t)=>{if(e.size<1e8){let i=new FormData;i.append("name",e.name),i.append("userID",this.state.loggedinUserID),i.append("description",""),i.append("file",e);let n=new XMLHttpRequest;n.open("POST",this.state.baseURL+"/upload.php"),n.upload.addEventListener("progress",(i=>{let r=i.loaded/i.total*100;this.filesUploading[t].fileName=e.name,this.filesUploading[t].perc=r})),n.addEventListener("load",(i=>{e.completed=!0;let t=!0;Array.from(r).forEach((e=>{e.completed||(t=!1)})),t&&(this.finished=!0,this.draggingOver=!1,this.showProgress=!1)})),n.send(i)}else this.showUploadProgress=!1,this.draggingOver=!1,this.showProgress=!1,i=!0,alert("a file was rejected due to incorrect type or filesize (max filesize = 100MB)"),this.$nextTick((()=>{this.showUploadProgress=!1,this.finished=!1,this.draggingOver=!1}))}))})))},dragLeaveHandler(e){this.draggingOver=!1,e.preventDefault(),e.stopPropagation()},mouseUpHandler(e){this.draggingOver=!1,e.preventDefault(),e.stopPropagation()},dragOverHandler(e){this.showProgress||(this.finished=!1),this.draggingOver=!0,e.preventDefault(),e.stopPropagation()}},mounted(){console.log(this.$refs),window.onmousemove=()=>{this.draggingOver=!1}}};const H=(0,p.Z)(P,[["render",L],["__scopeId","data-v-25484d73"]]);var k=H,b={components:{Main:h,Dropzone:k},name:"App",data(){return{state:{baseURL:"https://pshare.dweet.net"}}}};const T=(0,p.Z)(b,[["render",a]]);var z=T;(0,r.ri)(z).mount("#app")}},i={};function t(r){var n=i[r];if(void 0!==n)return n.exports;var s=i[r]={exports:{}};return e[r](s,s.exports,t),s.exports}t.m=e,function(){var e=[];t.O=function(i,r,n,s){if(!r){var a=1/0;for(p=0;p<e.length;p++){r=e[p][0],n=e[p][1],s=e[p][2];for(var o=!0,l=0;l<r.length;l++)(!1&s||a>=s)&&Object.keys(t.O).every((function(e){return t.O[e](r[l])}))?r.splice(l--,1):(o=!1,s<a&&(a=s));if(o){e.splice(p--,1);var d=n();void 0!==d&&(i=d)}}return i}s=s||0;for(var p=e.length;p>0&&e[p-1][2]>s;p--)e[p]=e[p-1];e[p]=[r,n,s]}}(),function(){t.d=function(e,i){for(var r in i)t.o(i,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:i[r]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,i){return Object.prototype.hasOwnProperty.call(e,i)}}(),function(){var e={143:0};t.O.j=function(i){return 0===e[i]};var i=function(i,r){var n,s,a=r[0],o=r[1],l=r[2],d=0;if(a.some((function(i){return 0!==e[i]}))){for(n in o)t.o(o,n)&&(t.m[n]=o[n]);if(l)var p=l(t)}for(i&&i(r);d<a.length;d++)s=a[d],t.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return t.O(p)},r=self["webpackChunkpshare"]=self["webpackChunkpshare"]||[];r.forEach(i.bind(null,0)),r.push=i.bind(null,r.push.bind(r))}();var r=t.O(void 0,[998],(function(){return t(680)}));r=t.O(r)})();
//# sourceMappingURL=app.7d4b5af5.js.map