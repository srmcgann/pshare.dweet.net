(function(){"use strict";var e={517:function(e,r,t){var n=t(963),a=t(252);function i(e,r,t,n,i,s){const o=(0,a.up)("Dropzone"),l=(0,a.up)("Main");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(o,{state:i.state,caption:"zone 1"},null,8,["state"]),(0,a.Wm)(o,{state:i.state,caption:"zone 2"},null,8,["state"]),(0,a.Wm)(l)],64)}const s={class:"main"};function o(e,r,t,n,i,o){return(0,a.wg)(),(0,a.iD)("div",s," main component ")}var l={name:"Main",props:["state"],data(){return{testData:"it works!"}}},d=t(744);const p=(0,d.Z)(l,[["render",o],["__scopeId","data-v-494a82c8"]]);var f=p,g=t(577);const c=e=>((0,a.dD)("data-v-6725b302"),e=e(),(0,a.Cn)(),e),u=["innerHTML"],h={key:0},m=c((()=>(0,a._)("p",null,[(0,a.Uk)("Drag one or more files to this "),(0,a._)("i",null,"drop zone"),(0,a.Uk)(".")],-1))),v=[m],w={key:1},D=["innerHTML"],L=c((()=>(0,a._)("div",{class:"progressBar"},[(0,a._)("div",{class:"innerProgress"})],-1)));function O(e,r,t,n,i,s){return(0,a.wg)(),(0,a.iD)("div",{id:"dropzone",class:(0,g.C_)({dragOver:i.draggingOver,fileUploading:i.showProgress,finished:i.finished}),ref:"drop_zone",onDrop:r[0]||(r[0]=(...e)=>s.dropHandler&&s.dropHandler(...e)),onDragover:r[1]||(r[1]=(...e)=>s.dragOverHandler&&s.dragOverHandler(...e)),onDragleave:r[2]||(r[2]=(...e)=>s.dragLeaveHandler&&s.dragLeaveHandler(...e)),onMouseup:r[3]||(r[3]=(...r)=>e.mouseupHandler&&e.mouseupHandler(...r))},[(0,a._)("div",{class:"caption",innerHTML:t.caption},null,8,u),i.showProgress?((0,a.wg)(),(0,a.iD)("div",w,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(i.fileList,((e,r)=>((0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("span",{class:"fileName",innerHTML:s.fileNameFormatted(e.name)},null,8,D),L])))),256))])):((0,a.wg)(),(0,a.iD)("div",h,v))],34)}var U={name:"Dropzone",props:["state","caption"],data(){return{testData:"it works!",draggingOver:!1,showProgress:!1,fileList:[],finished:!1,showUploadProgress:!1,filesUploading:[]}},methods:{fileNameFormatted(e){return e.length<=30?e:e.substring(0,20)+"..."+e.substring(e.length-6)},dropHandler(e){let r=0;e.preventDefault(),e.dataTransfer.items?(this.fileList=[],r=[...e.dataTransfer.items].length,this.filesUploading=Array(r).fill().map((e=>({}))),[...e.dataTransfer.items].forEach(((e,r)=>{if("file"===e.kind){const t=e.getAsFile();console.log(`… file[${r}].name = ${t.name}`),this.showProgress=!0,this.draggingOver=!1,this.fileList=[...this.fileList,t];let n=this.fileList;Array.from(n).forEach(((e,r)=>{e.completed=!1,this.filesUploading[r].perc=0,this.filesUploading[r].fileName=e.name})),Array.from(n).forEach(((e,r)=>{if(e.size<1e8){let t=new FormData;t.append("name",e.name),t.append("userID",this.state.loggedinUserID),t.append("description",""),t.append("file",e);let a=new XMLHttpRequest;a.open("POST",this.state.baseURL+"/upload.php"),a.upload.addEventListener("progress",(t=>{let n=t.loaded/t.total*100;this.filesUploading[r].fileName=e.name,this.filesUploading[r].perc=n})),a.addEventListener("load",(r=>{e.completed=!0;let t=!0;Array.from(n).forEach((e=>{e.completed||(t=!1)})),t&&(this.finished=!0)})),a.send(t)}else alert("a file was rejected due to incorrect type or filesize (max filesize = 100MB)"),this.showUploadProgress=!1}))}}))):(this.fileList=[],r=[...e.dataTransfer.files].length,this.filesUploading=Array(r).fill().map((e=>({}))),[...e.dataTransfer.files].forEach(((e,r)=>{console.log(`… file[${r}].name = ${e.name}`),this.showProgress=!0,this.draggingOver=!1,this.fileList=[...this.fileList,e];let t=this.fileList;Array.from(t).forEach(((e,r)=>{e.completed=!1,this.filesUploading[r].perc=0,this.filesUploading[r].fileName=e.name})),Array.from(t).forEach(((e,r)=>{if(e.size<1e8){let n=new FormData;n.append("name",e.name),n.append("userID",this.state.loggedinUserID),n.append("description",""),n.append("file",e);let a=new XMLHttpRequest;a.open("POST",this.state.baseURL+"/upload.php"),a.upload.addEventListener("progress",(t=>{let n=t.loaded/t.total*100;this.filesUploading[r].fileName=e.name,this.filesUploading[r].perc=n})),a.addEventListener("load",(r=>{e.completed=!0;let n=!0;Array.from(t).forEach((e=>{e.completed||(n=!1)})),n&&(this.finished=!0)})),a.send(n)}else alert("a file was rejected due to incorrect type or filesize (max filesize = 100MB)"),this.showUploadProgress=!1}))})))},dragLeaveHandler(e){this.draggingOver=!1,e.preventDefault(),e.stopPropagation()},mouseUpHandler(e){this.draggingOver=!1,e.preventDefault(),e.stopPropagation()},dragOverHandler(e){this.draggingOver=!0,e.preventDefault(),e.stopPropagation()}},mounted(){window.onmousemove=()=>{this.draggingOver=!1}}};const b=(0,d.Z)(U,[["render",O],["__scopeId","data-v-6725b302"]]);var y=b,H={components:{Main:f,Dropzone:y},name:"App",data(){return{state:{baseURL:"https://pshare.dweet.net"}}}};const P=(0,d.Z)(H,[["render",i]]);var z=P;(0,n.ri)(z).mount("#app")}},r={};function t(n){var a=r[n];if(void 0!==a)return a.exports;var i=r[n]={exports:{}};return e[n](i,i.exports,t),i.exports}t.m=e,function(){var e=[];t.O=function(r,n,a,i){if(!n){var s=1/0;for(p=0;p<e.length;p++){n=e[p][0],a=e[p][1],i=e[p][2];for(var o=!0,l=0;l<n.length;l++)(!1&i||s>=i)&&Object.keys(t.O).every((function(e){return t.O[e](n[l])}))?n.splice(l--,1):(o=!1,i<s&&(s=i));if(o){e.splice(p--,1);var d=a();void 0!==d&&(r=d)}}return r}i=i||0;for(var p=e.length;p>0&&e[p-1][2]>i;p--)e[p]=e[p-1];e[p]=[n,a,i]}}(),function(){t.d=function(e,r){for(var n in r)t.o(r,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)}}(),function(){var e={143:0};t.O.j=function(r){return 0===e[r]};var r=function(r,n){var a,i,s=n[0],o=n[1],l=n[2],d=0;if(s.some((function(r){return 0!==e[r]}))){for(a in o)t.o(o,a)&&(t.m[a]=o[a]);if(l)var p=l(t)}for(r&&r(n);d<s.length;d++)i=s[d],t.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return t.O(p)},n=self["webpackChunkpshare"]=self["webpackChunkpshare"]||[];n.forEach(r.bind(null,0)),n.push=r.bind(null,n.push.bind(n))}();var n=t.O(void 0,[998],(function(){return t(517)}));n=t.O(n)})();
//# sourceMappingURL=app.7d7faeba.js.map